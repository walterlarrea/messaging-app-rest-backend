import{j as s}from"./jsx-runtime.brvLbZ6j.js";import{r as o}from"./index.9-aKW1zO.js";import{u as l}from"./index.jt7Q199V.js";import{I as i}from"./Input.yVl0p27O.js";import{G as m,B as u}from"./iconBase._BMlvD6n.js";import{c as d,s as f,a as g}from"./index.aZD16Ifr.js";import{$ as p,s as x}from"./chat.-N9ODlVo.js";import{$ as h}from"./friends.skf41Mf2.js";import"./index.a4cdf180.IHyMe0ZT.js";import"./axios.yQ12Wcn0.js";import"./auth.Ilt-Bd4Y.js";import"./index.rS7vpNfE.js";function j(r){return m({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z"},child:[]}]})(r)}const C=({submitNewMessage:r})=>{const[t,a]=o.useState(""),n=e=>{e.preventDefault(),!(!t||t.length<=0)&&r(t).then(()=>a(""))};return s.jsxs("form",{autoComplete:"off",onSubmit:n,className:"flex justify-between items-center gap-2",children:[s.jsx(i,{type:"text",boxSize:"lg",id:"message-text",name:"message",placeholder:" Message",value:t,onChange:e=>a(e.target.value)}),s.jsx(u,{type:"submit",size:"lg",classes:"h-full text-5xl",disabled:t.length<=0,children:s.jsx(j,{})})]})},w=({content:r,date:t,isMine:a})=>{const e=d(a?"self-end":"self-start",a?f.accent:g.primary,"p-2","max-w-[400px]","rounded-[--radius]");return s.jsxs("section",{className:`flex ${e}`,children:[s.jsx("span",{className:"self-start",children:r}),s.jsx("small",{className:"ps-2 self-end text-[--muted-foreground]",children:String(t)})]})},E=()=>{const r=l(p),t=l(h),a=o.useRef(null);o.useEffect(()=>{a.current&&(a.current.scrollTop=a.current.scrollHeight)},[r.messages&&r.messages?.length]);const n=async e=>{const c={targetUserId:t.currentFriendChat.id,content:e};return await x(c)};return s.jsx("main",{className:"p-4 overflow-y-auto bg-[--accent]",children:s.jsxs("div",{className:"flex flex-col gap-4 h-full",children:[s.jsx("div",{ref:a,className:"flex flex-col gap-1 overflow-y-auto grow",children:r.messages?.map(e=>s.jsx(w,{isMine:e.senderId!==t.currentFriendChat?.id,content:e.content,date:e.date},e.id))}),t.currentFriendChat&&s.jsx(C,{submitNewMessage:n})]})})};export{E as default};
